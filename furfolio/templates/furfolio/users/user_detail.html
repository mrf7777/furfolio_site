{% extends "furfolio/layouts/title_body.html" %}

{% block title %}
<div class="d-flex flex-wrap align-items-center">
    <img class="me-3" src="{% include "./avatar_image_url.txt" with user=user only %}">{{ user.username }}

    <div class="flex-fill"></div>

    {% if user.pk == request.user.pk %}
        <div>
            <a class="btn btn-primary me-1" href="{% url "followed_list" user.username %}">Followed</a>
            <a class="btn btn-primary" href="{% url "update_user" user.username %}">Settings</a>
        </div>
    {% else %}
        {% if is_user_followed is True %}
            <form method="post" action="{% url "unfollow_user" user.username %}?next={{ request.get_full_path|urlencode }}">
                {% csrf_token %}
                <button class="btn btn-primary">Unfollow</button>
            </form>
        {% elif is_user_followed is False %}
            <form method="post" action="{% url "follow_user" user.username %}?next={{ request.get_full_path|urlencode }}">
                {% csrf_token %}
                <button class="btn btn-primary">Follow</button>
            </form>
        {% endif %}
    {% endif %}
</div>
{% endblock %}

{% block body %}
<a class="btn btn-primary mb-3" href="{% url "offer_list" %}?author={{ user.username }}&sort=created_date">Offers</a>
<p>
    {{ user.profile|linebreaks|urlize }}
</p>
{% endblock %}